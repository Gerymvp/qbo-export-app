REQUERIMIENTOS Y CRONOGRAMA - PRÁCTICA LABORAL (Semana 3)

Contexto
- Fecha: Semana 3 de la práctica laboral de verano.
- Objetivo general: Entregar una Single Source of Truth (SSoT) robusta, migrar y limpiar los datos existentes y construir conectores (scrapers/APIs) que alimenten dicha SSoT.
- Problemas por los que fuiste contratado:
  1. Diseño de la "Single Source of Truth" (SSoT).
  2. Migración y limpieza de datos.
  3. Desarrollo de los Conectores de Abastecimiento (Scrapers/APIs).

A) REQUISITOS QUE DEBISTE HABER LEVANTADO

1) SSoT - Requisitos funcionales y técnicos
- Alcance: Determinar entidades canonicas (productos, proveedores, precios, inventarios, políticas comerciales) y límites del SSoT.
- Modelo de datos: ERD y esquema canónico; reglas de normalización y tipos de datos.
- API contract: endpoints CRUD, filtros, paginación y versiones (OpenAPI/Swagger).
- Autorización y RLS: quién puede leer/escribir; roles y políticas RLS en Supabase.
- Conflictos y resolución: estrategia de último escritor/merge rules y trazabilidad (audit logs).
- Ownership: responsables por entidad, flujo de cambios y proceso de aprobación.
- Observabilidad: métricas, logs y alertas (errores de ingestión, latencia, tasa de fallos).
- Backups y restauración: plan de backup y pruebas de restore periódicas.

2) Migración y limpieza de datos
- Inventario de fuentes: listar sistemas actuales, formatos y volumenes (CSV, Excel, DB, APIs).
- Mapping: mapeo campo a campo entre fuentes y SSoT.
- Reglas de calidad: validaciones (SKU requerido, formato, unicidad), deduplicación, normalización (trim, lower), reglas de negocio.
- Ambientes: staging para pruebas, dataset de muestra y test accounts.
- Idempotencia: scripts migratorios repetibles y con checkpoints.
- Validación post-migración: checksums, conteos, muestras, reporte de diferencias.
- Rollback: plan y triggers para retroceder si la migración falla.

3) Conectores (Scrapers / APIs)
- Requisitos funcionales: fuentes soportadas, frecuencia de sincronización, autenticación (API keys / OAuth), limites de tasa.
- Resiliencia: retries con backoff, circuit breaker, manejo de timeouts.
- Transformaciones: aplicar mapping y reglas de normalización antes del upsert.
- Seguridad de secretos: almacenar claves en vault o variables de entorno seguras.
- Tests: unitarios e integración con mocks de las fuentes.
- Observabilidad: logs por ejecución, métricas de éxito/fallo, alertas.

4) Requisitos no-funcionales
- SLA: RTO/RPO para servicios críticos.
- Rendimiento: tiempos objetivos para consultas y cargas.
- Escalabilidad: plan para aumentar throughput (workers, colas).
- Seguridad y cumplimiento: protección de datos personales, gestión de accesos.

B) ENTREGABLES (mínimos)
- Documento de diseño SSoT (ERD + API contract) ✅
- .env.example, validación de variables de entorno en arranque
- Scripts de migración y dataset de pruebas
- Código de al menos 1 conector (POC) con tests y README
- Pipeline CI (lint, build, tests) y entorno staging
- Runbook de despliegue y rollback
- Reporte de calidad de datos tras migración

C) CRONOGRAMA SUGERIDO (8 semanas) — estado: estás en Semana 3

Semana 1 (Onboarding y descubrimiento) — COMPLETADA
- Tareas: inventario de fuentes, acceso a entornos, crear repositorio y reglas básicas (lint, .gitignore), reunir requisitos.
- Entregables: doc de requisitos iniciales, lista de fuentes.

Semana 2 (Diseño SSoT y entorno) — COMPLETADA
- Tareas: diseño ERD inicial, contrato API (OpenAPI), .env.example, validar variables en arranque (ej. supabase), configurar CI básica.
- Entregables: ERD, OpenAPI draft, CI pipeline básico, .env.example.

Semana 3 (TU SEMANA - En progreso) — ACTUAL
- Tareas prioritarias:
  - Implementar validación de envs en arranque (supabase.js) ✅
  - Implementar validaciones de datos básicas (SKU requerido, normalización, checks de duplicados)
  - Empezar scripts de migración (staging) y dataset de limpieza
  - Construir POC del primer conector (scraper simple o integracion API) con tests básicos
  - Definir políticas RLS y plan de roles
- Entregables esperados al final de la semana: validación en código, POC de conector, draft de migration script.
- Riesgos actuales: falta de datos de ejemplo completos; dependencias externas con rate limits.

Semana 4 (Integración y flujo end-to-end)
- Tareas: terminar conector 1, probar flujo completo (scraper -> transform -> upsert en SSoT), añadir metrics y logs, empezar migración parcial en staging.
- Entregables: flujo E2E para conector 1, reportes de logs.

Semana 5 (Migración y limpieza)
- Tareas: ejecutar migración en staging, aplicar reglas de calidad, arreglar inconsistencias, iterar scripts.
- Entregables: dataset migrado en staging con reporte de calidad.

Semana 6 (Escalado y conectores adicionales)
- Tareas: optimizar performance, añadir 2-3 conectores más, robustecer retries y monitorización.
- Entregables: conectores adicionales y tablero básico de métricas.

Semana 7 (Pruebas, seguridad y documentación)
- Tareas: pruebas E2E completas, revisión de RLS y seguridad, preparar runbook de despliegue.
- Entregables: tests E2E, runbook, checklist de seguridad.

Semana 8 (Producción y entrega)
- Tareas: despliegue controlado a producción, monitoreo post-deploy, demo final y cierre de práctica.
- Entregables: despliegue en producción, informe final, lecciones aprendidas.

D) REUNIONES Y CHECKPOINTS
- Standup diario (15 min).
- Demo semanal con mentor y stakeholders (30 min).
- Revisión de código y merge requests (cada push significativo).
- Reunión de riesgos y bloqueos (ad-hoc).

E) CRITERIOS DE ACEPTACIÓN (por entrega)
- SSoT design: aprobado por 2 stakeholders y con ERD y OpenAPI documentados.
- Migración: cobertura >= 95% de registros esperados; validaciones automatizadas; rollback probado.
- Conectores: 90% success rate en pruebas de integración, con retries y logs registrados.
- Seguridad: RLS aplicada y tests de acceso.

F) RIESGOS Y MEDIDAS DE MITIGACIÓN
- Riesgo: Fuentes externas con rate limits -> Mitigación: throttling y cache.
- Riesgo: Datos inconsistentes -> Mitigación: crear reglas de calidad, muestras y validaciones automáticas.
- Riesgo: Falta de acceso a entornos -> Mitigación: solicitar accesos temprano, crear datasets simulados.

G) TAREAS INMEDIATAS RECOMENDADAS (para Semana 3)
1. Finalizar validación de variables de entorno y añadir `.env.example`.
2. Probar y documentar RLS en staging (definir roles).
3. Terminar POC del primer conector y escribir tests de integración.
4. Escribir script de migración para un subconjunto de productos en staging y validar resultados.
5. Preparar la demo semanal con evidencia (logs, reportes, pantallazos).

Si quieres, adapto este cronograma a la duración exacta de tu práctica (p.ej., 6 semanas) o lo exporto a un formato de calendario / Excel. ¿Lo guardo así o quieres que haga algún ajuste? 
